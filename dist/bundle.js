(()=>{"use strict";const t=document.querySelectorAll(".js-btn-number"),e=document.querySelectorAll(".js-btn-operator"),n=document.getElementById("result"),o=function(){const t=[];let e;return{addNumStatus(e){t.push(e)},addOperatorStatus(t){e=t},getNumStatus:()=>t,getOperatorStatus:()=>e,clearNumStatus(){t.length=0},clearOperatorStatus(){e=""}}}();function r(){return!!o.getOperatorStatus()}function u(){return 1===o.getNumStatus().length}function a(){return 2===o.getNumStatus().length}function s(){n.textContent.length>=11&&(n.textContent="E",o.clearOperatorStatus(),o.clearNumStatus())}function c(){o.getNumStatus().pop(),o.addNumStatus(+n.textContent)}function i(){const t=o.getNumStatus().shift(),e=o.getNumStatus().shift(),r=o.getOperatorStatus();if("+"===r){const o=t+e;n.textContent=o.toString()}else if("-"===r){const o=t-e;n.textContent=o.toString()}else if("*"===r){const o=t*e;n.textContent=o.toString()}else if("/"===r){const o=t/e;n.textContent=o.toString()}o.clearNumStatus(),o.clearOperatorStatus(),o.addNumStatus(+n.textContent),s()}function f(t){if(t.currentTarget instanceof HTMLButtonElement){const e=t.currentTarget.dataset.number;if(-1!==n.textContent.indexOf(".")&&"."===e)return;if("0"===n.textContent&&"."===e)return n.textContent+=e,void c();if("="===o.getOperatorStatus()&&"."===e)return o.clearOperatorStatus(),n.textContent+=e,void c();if("0"!==n.textContent&&"E"!==n.textContent||(n.textContent=""),r()&&u()&&(o.addNumStatus(+e),n.textContent=""),n.textContent.length>=11)return;n.textContent+=e,c(),l()}}function l(){const t=document.querySelector(".active");t&&t.classList.remove("active")}function S(t){if(t.currentTarget instanceof HTMLButtonElement){const e=t.currentTarget,f=t.currentTarget.dataset.operator;(function(t){if("AC"===t)o.clearNumStatus(),o.clearOperatorStatus(),n.textContent="0";else if("C"===t)n.textContent="0",c();else if("%"===t){const t=.01,e=+n.textContent;n.textContent=(e*t).toString(),c(),s()}else"="===t&&a()?(i(),o.addOperatorStatus(t)):"="!==t&&function(t){a()&&i(),r()&&o.clearOperatorStatus(),u()&&o.addOperatorStatus(t)}(t)})(f),function(t,e){"%"!==e&&("AC"===e||"C"===e||"="===e?l():(l(),t.classList.add("active")))}(e,f)}}!function(t){for(const e of t)e.addEventListener("click",f)}(t),function(t){for(const e of t)e.addEventListener("click",S)}(e)})();